/* 1. ЭКРАН БИНДЕРА - Центрируем саму книгу */
#cardbinder-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    height: 100dvh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    z-index: 1000;
    background: rgba(0,0,0,0.5); /* Чтобы видеть, что экран открылся */
}

/* Глобальный скрыватель - самый сильный */
.hidden {
    display: none !important;
}

/* 2. КОНТЕЙНЕР КНИГИ - Фиксируем размеры, чтобы JS не мазал мимо центра */
.cardbinder-book {
    width: 900px; /* Совет: лучше фикс, чем %, так клики точнее */
    max-width: 95vw;
    height: 600px;
    max-height: 70vh;
    position: relative;
    margin: 0 auto;
    /* Убрал flex, он тут ломал absolute-слои */
    pointer-events: auto !important;
    z-index: 10;
}

/* 3. ОБЛОЖКА */
#main-cover {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80% !important;
    height: 80% !important;
    object-fit: contain;
    cursor: pointer;
    z-index: 20; /* Обложка выше разворота, пока не скрыта */
}

/* 4. РАЗВОРОТ */
#cardbinder-spread {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 15;
    /* Убрал aspect-ratio, если задал высоту книге выше */
}

/* Принудительное скрытие разворота через ID+Класс (самый высокий приоритет) */
#cardbinder-spread.hidden {
    display: none !important;
}

/* 5. СЛОИ КНИГИ */
.cardbinder-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.cardbinder-layer-1 { z-index: 1; opacity: 1.0; }
.cardbinder-layer-2 { z-index: 2; opacity: 0.4; }

/* 6. СЕТКА КАРТ */
.cardbinder-layer-3 {
    position: absolute !important;
    top: 18% !important;
    left: 22% !important;
    width: 60% !important;
    height: 60% !important;
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    grid-template-rows: 1fr 1fr !important;
    gap: 0 !important;
    z-index: 30; /* Сетка поверх бумаги */
    pointer-events: auto !important;
}

.cards-slot {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Твои отступы для слотов */
.cards-slot:nth-child(3),
.cards-slot:nth-child(4) { margin-top: 5% !important; }

.cards-slot:nth-child(1),
.cards-slot:nth-child(3) { margin-left: 5% !important; } /* Снизил с 40%, чтобы не улетало */

/* КАРТОЧКИ */
.binder-card {
    width: 90%;
    height: 90%;
    display: flex;
    justify-content: center;
}

.binder-card img {
    width: 80% !important; /* Было 50% - мелковато */
    height: auto !important;
    object-fit: contain;
    border-radius: 8%;
}

/* Блик и Корешок */
.cardbinder-layer-4 { z-index: 40; opacity: 0.2; pointer-events: none; }

#cardbinder-spine {
    position: absolute;
    width: 10%;
    height: 80%;
    left: 45%;
    top: 10%;
    z-index: 50;
    pointer-events: none;
}
